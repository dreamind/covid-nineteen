(function(e){function t(t){for(var r,i,o=t[0],c=t[1],d=t[2],l=0,h=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&h.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(h.length)h.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},s={app:0},n=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var d=0;d<o.length;d++)t(o[d]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"18d0":function(e){e.exports=JSON.parse('{"a":["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burma","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Congo (Brazzaville)","Congo (Kinshasa)","Costa Rica","Cote d\'Ivoire","Croatia","Cuba","Cyprus","Czechia","Denmark","Diamond Princess","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Holy See","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Korea, South","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","MS Zaandam","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Mauritania","Mauritius","Mexico","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Namibia","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Macedonia","Norway","Oman","Pakistan","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Taiwan*","Tanzania","Thailand","Timor-Leste","Togo","Trinidad and Tobago","Tunisia","Turkey","US","Uganda","Ukraine","United Arab Emirates","United Kingdom","Uruguay","Uzbekistan","Venezuela","Vietnam","West Bank and Gaza","Western Sahara","Yemen","Zambia","Zimbabwe"],"b":["2020-01-22","2020-01-23","2020-01-24","2020-01-25","2020-01-26","2020-01-27","2020-01-28","2020-01-29","2020-01-30","2020-01-31","2020-02-01","2020-02-02","2020-02-03","2020-02-04","2020-02-05","2020-02-06","2020-02-07","2020-02-08","2020-02-09","2020-02-10","2020-02-11","2020-02-12","2020-02-13","2020-02-14","2020-02-15","2020-02-16","2020-02-17","2020-02-18","2020-02-19","2020-02-20","2020-02-21","2020-02-22","2020-02-23","2020-02-24","2020-02-25","2020-02-26","2020-02-27","2020-02-28","2020-02-29","2020-03-01","2020-03-02","2020-03-03","2020-03-04","2020-03-05","2020-03-06","2020-03-07","2020-03-08","2020-03-09","2020-03-10","2020-03-11","2020-03-12","2020-03-13","2020-03-14","2020-03-15","2020-03-16","2020-03-17","2020-03-18","2020-03-19","2020-03-20","2020-03-21","2020-03-22","2020-03-23","2020-03-24","2020-03-25","2020-03-26","2020-03-27","2020-03-28","2020-03-29","2020-03-30","2020-03-31","2020-04-01","2020-04-02","2020-04-03","2020-04-04","2020-04-05","2020-04-06","2020-04-07","2020-04-08","2020-04-09","2020-04-10","2020-04-11","2020-04-12","2020-04-13"]}')},"1e60":function(e,t,a){"use strict";var r=a("3e18"),s=a.n(r);s.a},"3e18":function(e,t,a){},4239:function(e,t,a){},"44e9":function(e,t,a){},4781:function(e,t,a){"use strict";var r=a("4239"),s=a.n(r);s.a},"55db":function(e,t,a){"use strict";var r=a("8775"),s=a.n(r);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("5997"),a("a979"),a("97c9"),a("f70b");var r=a("f5d4"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"app-header"},[e._l(e.columns,(function(t,r){return a("div",{key:r,style:e.columnWidthStyle(r)},[0===r?a("div",{staticClass:"mode-select"},[a("span",{staticClass:"symbol",attrs:{"data-select":0===e.mode,title:"Total & New Cases"},on:{click:function(t){return e.setMode(0)}}},[e._v("∑+Δ")]),a("span",{staticClass:"symbol",attrs:{"data-select":1===e.mode,title:"Total Cases"},on:{click:function(t){return e.setMode(1)}}},[e._v("∑")]),a("span",{staticClass:"symbol",attrs:{"data-select":2===e.mode,title:"New Cases (daily)"},on:{click:function(t){return e.setMode(2)}}},[e._v("Δ")])]):a("div",{staticClass:"indicator"},[a("div",{staticClass:"numbers"},[a("span",{class:t.field},[e._v(e._s(e.nFormat(e.currents[t.field])))]),a("span",{staticClass:"divider"}),a("span",{class:t.dField},[e._v(e._s(e.dFormat(e.currents[t.dField])))])]),a("div",{staticClass:"heading"},[e._v(" "+e._s(t.title)+" Cases ")])])])})),a("div",{staticClass:"indicator date"},[a("div",{staticClass:"human-date"},[e._v(" "+e._s(e.humanDate)+" ")]),a("div",{staticClass:"heading"},[e._v(" as "+e._s(e.distDate)+" ")])]),a("div",{staticClass:"countries"},e._l(e.currentCountries,(function(t){return a("span",{key:t,staticClass:"country"},[e._v(" "+e._s(t)+" ")])})),0)],2),a("div",{staticClass:"app-body"},[a("Grid",{attrs:{id:"grid",mode:e.mode,labelWidth:e.labelWidth,barWidths:e.barWidths},on:{change:e.gridChange,resetCountry:e.resetCountry,toggleCountry:e.toggleCountry}}),a("div",{attrs:{id:"charts"}},[a("Chart",{attrs:{title:"Total Confirmed",selectedMeasures:["deceased","recovered","active"],height:150,width:600}}),a("Chart",{attrs:{title:"Daily Deceased",selectedMeasures:["dDeceased"],height:80,width:600}}),a("Chart",{attrs:{title:"Daily Recovered",selectedMeasures:["dRecovered"],height:80,width:600}}),a("Chart",{attrs:{title:"Daily Active",selectedMeasures:["dActive"],height:80,width:600}})],1)],1)])},n=[],i=(a("c09b"),a("93b8")),o=a("4b3d"),c=a("8124"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"grid"},[a("div",{staticClass:"grid-header"},[a("label",{staticClass:"tickbox"},[a("input",{attrs:{type:"checkbox",value:"false"},on:{click:e.resetCountries}}),a("span")]),e._l([0,1,2,3,4],(function(t){return a("div",{key:t,staticClass:"heading",style:e.columnWidthStyle(t)},[a("span",[e._v(e._s(e.modeHeading(t)))]),a("div",{staticClass:"sorter",class:e.sorterCls(t)},[a("span",{on:{click:function(a){return e.setSorter(t,1)}}},[e._v("▼")]),a("span",{on:{click:function(a){return e.setSorter(t,2)}}},[e._v("▲")])])])}))],2),a("div",{staticClass:"rows-wrapper scrolled"},e._l(e.sortedRows,(function(t){return a("row",{key:t.country,attrs:{row:t,mode:e.mode,labelWidth:e.labelWidth,barWidths:e.barWidths},on:{toggleCountry:e.toggleCountry}})})),1)])},u=[],l=(a("541a"),a("e51e")),h=a.n(l),f=a("ed6a"),m=(a("6f23"),a("be7f"),a("f944"),a("f8cf"),a("ea49")),b=a("f351"),p=a.n(b),v=a("2e31"),j=a("18d0"),w=(a("1d82"),Object(f["reduce"])(j["b"],(function(e,t,a){return e[t]=a,e}),{})),g=["country","date","dateIndex"],y=["total","dTotal","d2Total","deceased","dDeceased","d2Deceased","recovered","dRecovered","d2Recovered","active","dActive","d2Active"],x=g.concat(y),C={0:"Total",1:"Total",2:"New"},S={0:"none",1:"desc",2:"asc"},_=[{tag:"country",field:"country",title:"Country"},{tag:"total",field:"total",title:"Confirmed",dField:"dTotal"},{tag:"deceased",field:"deceased",title:"Deceased",dField:"dDeceased"},{tag:"recovered",field:"recovered",title:"Recovered",dField:"dRecovered"},{tag:"active",field:"active",title:"Active",dField:"dActive"}],k=(new Intl.NumberFormat).format,W=function(e){return k(e)},M=function(e){var t=k(e);return e<=0?t:"+".concat(t)},O=null,D={max:Number.MIN_SAFE_INTEGER,min:Number.MAX_SAFE_INTEGER,sum:0,count:0,maxSum:Number.MIN_SAFE_INTEGER},V=["d2Total","d2Deceased","d2Recovered","d2Active"];function N(){return A.apply(this,arguments)}function A(){return A=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!O){e.next=2;break}return e.abrupt("return",O);case 2:return e.next=4,p.a.get("data/covid-19.arrow",{responseType:"arraybuffer"});case 4:return t=e.sent,a=t.data,e.next=8,v["a"].from([a]);case 8:return O=e.sent,e.abrupt("return",O);case 10:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function R(e,t,a,r){Object(f["each"])(a,(function(a){r[a]=e[a](t)}))}function T(e,t,a,r,s){Object(f["each"])(y,(function(n){var i=e[n](t),o=r[n];a[n]=i,s&&s(i,n),o.min>i?o.min=i:o.max<i&&(o.max=i),o.sum+=i,o.count++}))}function z(e,t){"string"===typeof e&&(e=w[e]);var a=[],r={},s={},n={},i=e-t-1,o=v["b"].col("dateIndex").ge(i).and(v["b"].col("dateIndex").le(e));return Object(f["each"])(y,(function(e){s[e]=Object(f["clone"])(D)})),O.filter(o).scan((function(t){var i={__mean__:{},selected:!1},o=r.dateIndex(t),c=r.country(t);n[c]||(n[c]={history:[],row:null}),o===e?(R(r,t,g,i),T(r,t,i,s),n[c].history.push(i),n[c].row=i,a.push(i)):(R(r,t,y,i),n[c].history.push(i))}),(function(e){Object(f["each"])(x,(function(t){r[t]=v["b"].col(t).bind(e)}))})),Object(f["each"])(n,(function(e,t){var a=e.history,r=e.row;n[t].means={},Object(f["each"])(V,(function(e){var s=Object(f["meanBy"])(a,e);n[t].means[e]=s,r.__mean__[e]=s}))})),{rows:a,stats:s,ext:n}}function B(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=Object(m["a"])(a),s=r[0],n=r.slice(1),i={},o=[],c={};return Object(f["each"])(y,(function(e){i[e]=Object(f["clone"])(D)})),Object(f["each"])(j["b"],(function(e){var t=w[e];o[t]={rows:[],sum:{}},Object(f["each"])(y,(function(e){o[t].sum[e]=0}))})),s?(t=Object(f["reduce"])(n,(function(e,t){return e.or(v["b"].col("country").eq(t))}),v["b"].col("country").eq(s)),e=O.filter(t)):e=O,e.scan((function(e){var t={},a=c.dateIndex(e);R(c,e,g,t),T(c,e,t,i,(function(e,t){e+=o[a].sum[t],o[a].sum[t]=e,i[t].maxSum<e&&(i[t].maxSum=e)})),o[a].rows.push(t)}),(function(e){Object(f["each"])(x,(function(t){c[t]=v["b"].col(t).bind(e)}))})),{stats:i,series:o}}var E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("label",{staticClass:"tickbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.row.selected,expression:"row.selected"}],attrs:{type:"checkbox",value:"row.country"},domProps:{checked:Array.isArray(e.row.selected)?e._i(e.row.selected,"row.country")>-1:e.row.selected},on:{click:e.toggleCountry,change:function(t){var a=e.row.selected,r=t.target,s=!!r.checked;if(Array.isArray(a)){var n="row.country",i=e._i(a,n);r.checked?i<0&&e.$set(e.row,"selected",a.concat([n])):i>-1&&e.$set(e.row,"selected",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.row,"selected",s)}}}),a("span")]),a("div",{staticClass:"country",style:e.columnWidthStyle(0),attrs:{title:e.row.country},on:{click:e.toggleCountry}},[e._v(e._s(e.row.country))]),a("cell",{staticClass:"total",attrs:{log:!1,row:e.row,value:e.row.total,dValue:e.row.dTotal,d2Value:e.row.__mean__.d2Total,maxValue:e.rowStats["total"].max,maxDValue:e.rowStats["dTotal"].max,minValue:e.rowStats["total"].min,minDValue:e.rowStats["dTotal"].min,barWidth:e.barWidths[1],labelWidth:e.labelWidth,mode:e.mode}}),a("cell",{staticClass:"deceased",attrs:{log:!1,row:e.row,value:e.row.deceased,dValue:e.row.dDeceased,d2Value:e.row.__mean__.d2Deceased,maxValue:e.rowStats["deceased"].max,maxDValue:e.rowStats["dDeceased"].max,minValue:e.rowStats["deceased"].min,minDValue:e.rowStats["dDeceased"].min,barWidth:e.barWidths[2],labelWidth:e.labelWidth,mode:e.mode}}),a("cell",{staticClass:"recovered",attrs:{log:!1,row:e.row,value:e.row.recovered,dValue:e.row.dRecovered,d2Value:e.row.__mean__.d2Recovered,maxValue:e.rowStats["recovered"].max,maxDValue:e.rowStats["dRecovered"].max,minValue:e.rowStats["recovered"].min,minDValue:e.rowStats["dRecovered"].min,barWidth:e.barWidths[3],labelWidth:e.labelWidth,mode:e.mode}}),a("cell",{staticClass:"active",attrs:{log:!1,row:e.row,value:e.row.active,dValue:e.row.dActive,d2Value:e.row.__mean__.d2Active,maxValue:e.rowStats["active"].max,maxDValue:e.rowStats["dActive"].max,minValue:e.rowStats["active"].min,minDValue:e.rowStats["dActive"].min,barWidth:e.barWidths[4],labelWidth:e.labelWidth,mode:e.mode}})],1)},F=[],G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cell",style:{width:e.allWidth+"px"}},[e.showValue?a("div",{staticClass:"value-label",style:{width:e.labelWidth+"px"}},[e._v(e._s(e.nFormat(e.value)))]):e._e(),e._e(),a("div",{staticClass:"bars"},[e.showValue?a("div",{staticClass:"value bar",style:{width:e.valueWidthPx}}):e._e(),e.showDValue?a("div",{staticClass:"d-value bar",class:e.dValueBarCls,style:{width:e.dValueWidthPx}}):e._e(),e.showDValue?a("div",{staticClass:"d-value-label"},[e._v(e._s(e.dFormat(e.dValue))+" "),a("span",{staticClass:"symbol"},[e.d2Value<0?a("span",[e._v("↓")]):e._e(),0===e.d2Value?a("span",[e._v("→")]):e._e(),e.d2Value>0?a("span",[e._v("↑")]):e._e()])]):e._e()])])},P=[],$={name:"Cell",props:{log:Boolean,row:Object,value:Number,dValue:Number,d2Value:Number,minValue:Number,maxValue:Number,minDValue:Number,maxDValue:Number,barWidth:Number,labelWidth:Number,mode:Number},created:function(){},computed:{dValueBarCls:function(){return this.dValue<0?"negative":""},allWidth:function(){return this.barWidth+2*this.labelWidth+2},showValue:function(){return this.value>0&&this.mode<2},showDValue:function(){return 0!==this.dValue&&1!==this.mode},currentMax:function(){return 2===this.mode?Object(f["max"])([this.maxDValue,Math.abs(this.minDValue),1]):Object(f["max"])([this.maxValue,Math.abs(this.minValue),1])},valueWidth:function(){var e=this.calcWidth(this.value);return 0===this.mode&&this.dValue>0&&(e-=this.dValueWidth),e<=0&&(e=1),e},dValueWidth:function(){var e=this.calcWidth(Math.abs(this.dValue));return e<=0&&(e=1),e},valueWidthPx:function(){return"".concat(this.valueWidth,"px")},dValueWidthPx:function(){return"".concat(this.dValueWidth,"px")}},mounted:function(){},methods:{nFormat:W,dFormat:M,calcWidth:function(e){return Math.ceil(e*this.barWidth/this.currentMax)}}},I=$,L=(a("1e60"),a("7edf")),K=Object(L["a"])(I,G,P,!1,null,null,null),U=K.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"checkbox"},[a("div",{staticClass:"box-on"}),a("div",{staticClass:"box-off"}),a("label",[e._t("default")],2)])},H=[],Y={name:"Checkbox",model:{prop:"checked"},props:{checked:{default:!1},value:{default:""}},data:function(){return{inputModel:this.checked,x:"x"}},mounted:function(){},watch:{checked:function(e){this.inputModel=e,console.log(e)}},computed:{},methods:{inputChange:function(){console.log(this.inputModel),this.$emit("input",this.inputModel)}}},J=Y,Z=(a("d5df"),Object(L["a"])(J,q,H,!1,null,null,null)),Q=Z.exports,X={data:function(){return{}},methods:{columnWidthStyle:function(e){var t;return t=e?this.barWidths[e]+2*this.labelWidth+2:this.barWidths[e],t+="px",{width:t}}}},ee={name:"Row",props:{log:Boolean,row:Object,mean:Object,mode:Number,barWidths:Array,labelWidth:Number},mixins:[X],components:{Cell:U,Checkbox:Q},computed:Object(o["a"])({},Object(c["b"])(["rowStats"])),data:function(){return{barWidth:80,dWidth:40,checked:!1}},watch:{checked:function(){this.$emit("select",this.row.country,this.checked)}},mounted:function(){},methods:{toggleCountry:function(){this.$emit("toggleCountry",this.row.country)}}},te=ee,ae=(a("55db"),Object(L["a"])(te,E,F,!1,null,null,null)),re=ae.exports,se={name:"Grid",mixins:[X],components:{Row:re},props:{mode:Number,msg:String,labelWidth:Number,barWidths:Array},data:function(){return{sortedRows:[],currentSorter:1,sorters:[0,1,0,0,0]}},computed:Object(o["a"])({},Object(c["b"])(["rows","rowStats","currentDate","currentCountries"])),watch:{mode:function(){this.updateSorted()},rows:function(){this.sortedRows=Object(f["orderBy"])(this.rows,"total","desc"),this.$emit("change",this.rowStats)}},methods:{updateSorted:function(){var e=this.currentSorter,t=this.sorters[e],a=1===t?"desc":"asc",r=2===this.mode?_[e].dField:_[e].field;this.sortedRows=Object(f["orderBy"])(this.rows,r,a)},setSorter:function(e,t){var a=this.sorters;this.mode;this.currentSorter=e,Object(f["each"])(a,(function(r,s){a[s]=s===e?t:0})),this.updateSorted()},modeHeading:function(e){if(!e)return"Country";var t="".concat(C[this.mode]);return this.mode||(t+=" (±New)"),t},headingWidthStyle:function(e){var t=this.barWidths[e]+2*this.labelWidth+2;return t+="px",{width:t}},sorterCls:function(e){var t=this.sorters[e];return S[t]},resetCountries:function(){this.$emit("resetCountries")},toggleCountry:function(e){this.$emit("toggleCountry",e)}},mounted:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},ne=se,ie=(a("ed9a"),Object(L["a"])(ne,d,u,!1,null,null,null)),oe=ie.exports,ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chart"},[a("div",{staticClass:"header"},[a("span",{staticClass:"vertical",style:{width:e.height+20+"px"}},[e._v(e._s(e.title))])]),a("svg",{attrs:{width:e.width+"px",height:e.height+20+"px"}},e._l(e.bars,(function(t,r){var s=t.x,n=(t.date,t.stacks),i=t.month,o=t.tick;return a("g",{key:r},[a("rect",{staticClass:"base",attrs:{fill:"transparent",x:s+"px",y:e.oy+"px",width:e.barWidth+"px",height:e.height+"px"}}),e._l(e.selectedMeasures,(function(e){return a("rect",{key:e,staticClass:"bar",class:e,attrs:{fill:"#eeeeee",x:s+"px",y:n[e].y+"px",width:n[e].w+"px",height:n[e].h+"px"}})})),i?a("line",{staticClass:"tickMonth",attrs:{x1:s+e.barWidth/2+"px",y1:e.oy+e.height+"px",x2:s+e.barWidth/2+"px",y2:e.dateY-9+"px"}}):e._e(),i?a("text",{staticStyle:{"text-anchor":"middle"},attrs:{x:s+e.barWidth/2+"px",y:e.dateY+"px",width:"100px"}},[e._v(e._s(i))]):e._e(),o?a("line",{staticClass:"tick",attrs:{x1:s+e.barWidth/2+"px",y1:e.oy+e.height+"px",x2:s+e.barWidth/2+"px",y2:e.oy+e.height+4+"px"}}):e._e()],2)})),0)])},de=[],ue={name:"Chart",props:{countriesSelected:Array,selectedMeasures:Array,title:String,height:Number,width:Number},data:function(){return{tickLength:3,gap:12,dateY:0,ox:10,oy:0,barWidth:0,dateRange:[],dateNum:0,bars:[]}},computed:Object(o["a"])({},Object(c["b"])(["dates","series","seriesStats","currentDate","currentCountries"])),methods:{calcContext:function(){this.dateRange=this.dates,this.dateNum=this.dates.length;var e=Math.floor(this.width/this.dateNum);e%2===0&&(e-=1),e-=1,this.barWidth=e},calcBars:function(){var e=this,t=this.height,a=this.barWidth,r=this.ox,s=this.oy,n=this.selectedMeasures,i=this.dates,o=r,c=[];Object(f["each"])(i,(function(r,i){var d=s+t,u={},l=h()(r),m=l.date(),b=l.day(),p=null,v=!1;1===m&&(p=l.format("MMM")),1===b&&(v=!0);var j=0;Object(f["each"])(n,(function(t){j+=e.seriesStats[t].maxSum})),Object(f["each"])(n,(function(s){var n=e.series[i].sum[s],c=Math.ceil(n*t/j);d-=c,u[s]={x:o,y:d,w:a,h:c,date:r}}));var w={date:r,x:o,stacks:u,month:p,tick:v};c.push(w),o+=a+1})),this.bars=c}},watch:{seriesStats:function(){this.dateY=this.oy+this.height+this.tickLength+this.gap,this.calcContext(),this.calcBars()}},mounted:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},le=ue,he=(a("4781"),Object(L["a"])(le,ce,de,!1,null,"2a38991e",null)),fe=he.exports,me={name:"App",mixins:[X],components:{Grid:oe,Chart:fe},data:function(){return{humanDate:"",distDate:"",columns:_,labelWidth:45,mode:0,barWidths:[70,60,60,60,60],selectedCountries:[],colWidths:[],currents:{total:0,dTotal:0,deceased:0,dDeceased:0,recovered:0,dRecovered:0,active:0,dActive:0}}},computed:Object(o["a"])({},Object(c["b"])(["rows","rowStats","series","currentDate","currentCountries"])),created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("pull");case 2:e.$store.dispatch("getSnapshot"),e.$store.dispatch("getTimeseries");case 4:case"end":return t.stop()}}),t)})))()},watch:{currentDate:function(){this.updateCurrentDate()},rowStats:function(){this.updateMainStats()}},mounted:function(){},methods:{updateCurrentDate:function(){var e=h()(this.currentDate);this.humanDate=e.format("ddd, D MMM YY");var t=h.a.duration(e.diff(h()())).asDays();t=0===t?"today":h.a.duration(-Math.abs(t),"days").humanize(!0),this.distDate=t},updateMainStats:function(){var e=this;Object(f["each"])(this.currents,(function(t,a){e.currents[a]=e.rowStats[a].sum}))},nFormat:W,dFormat:M,setMode:function(e){this.mode=e},gridChange:function(e){},resetCountry:function(){this.$store.dispatch("updateCountries",null)},toggleCountry:function(e){this.$store.dispatch("updateCountries",e)}}},be=me,pe=(a("7faf"),Object(L["a"])(be,s,n,!1,null,null,null)),ve=pe.exports;r["a"].use(c["a"]);var je=new c["a"].Store({state:{movingDays:3,table:null,countries:j["a"],dates:j["b"],dateMap:w,currentDate:null,rows:[],rowMap:{},rowStats:null,currentCountries:[],series:[],seriesStats:null},getters:{table:function(e){return e.table},countries:function(e){return e.countries},dates:function(e){return e.dates},dateMap:function(e){return e.dateMap},currentDate:function(e){return e.currentDate},rows:function(e){return e.rows},rowMap:function(e){return e.rowMap},rowStats:function(e){return e.rowStats},currentCountries:function(e){return e.currentCountries},series:function(e){return e.series},seriesStats:function(e){return e.seriesStats}},mutations:{setTable:function(e,t){e.table=t},setSnapshot:function(e,t){var a=t.currentDate,r=t.rows,s=t.rowStats;e.currentDate=a,e.rowMap=Object(f["keyBy"])(r,"country"),e.rows=r,e.rowStats=s},updateCountries:function(e,t){var a=t.country,s=t.selected;a?r["a"].set(e.rowMap[a],"selected",s):Object(f["each"])(e.rowMap,(function(e){e.selected&&r["a"].set(e,"selected",!1)}))},setTimeseries:function(e,t){var a=t.currentCountries,r=t.series,s=t.seriesStats;e.currentCountries=a,e.series=r,e.seriesStats=s}},actions:{pull:function(e){return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:a=t.sent,e.commit("setTable",a);case 4:case"end":return t.stop()}}),t)})))()},getSnapshot:function(e,t){var a=e.state;t||(t=j["b"][j["b"].length-1]);var r=z(t,a.movingDays),s=r.rows,n=r.stats;console.log("1",s,n),e.commit("setSnapshot",{currentDate:t,rows:s,rowStats:n})},updateCountries:function(e,t){var a,r,s=e.state,n=s.currentCountries,i=s.rowMap;t?(r=i[t].selected,a=r?Object(f["without"])(n,t):Object(f["union"])(n,[t]),r=!r):a=[],e.commit("updateCountries",{country:t,selected:r}),e.dispatch("getTimeseries",a)},getTimeseries:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=B(t),r=a.series,s=a.stats;console.log("2",r,s),e.commit("setTimeseries",{currentCountries:t,series:r,seriesStats:s})}}});r["a"].config.productionTip=!1,new r["a"]({store:je,render:function(e){return e(ve)}}).$mount("#app")},"7faf":function(e,t,a){"use strict";var r=a("44e9"),s=a.n(r);s.a},8775:function(e,t,a){},bc4d:function(e,t,a){},d5df:function(e,t,a){"use strict";var r=a("bc4d"),s=a.n(r);s.a},e0cc:function(e,t,a){},e395:function(e,t,a){var r={"./af":"46fd","./af.js":"46fd","./ar":"7cf8","./ar-dz":"8c1d","./ar-dz.js":"8c1d","./ar-kw":"6820","./ar-kw.js":"6820","./ar-ly":"531b","./ar-ly.js":"531b","./ar-ma":"6807","./ar-ma.js":"6807","./ar-sa":"40a2","./ar-sa.js":"40a2","./ar-tn":"f821","./ar-tn.js":"f821","./ar.js":"7cf8","./az":"8c0f","./az.js":"8c0f","./be":"0623","./be.js":"0623","./bg":"b8ec","./bg.js":"b8ec","./bm":"138a","./bm.js":"138a","./bn":"8f0d","./bn.js":"8f0d","./bo":"79dd","./bo.js":"79dd","./br":"626d","./br.js":"626d","./bs":"5ffa","./bs.js":"5ffa","./ca":"33b8","./ca.js":"33b8","./cs":"1c02","./cs.js":"1c02","./cv":"23d2","./cv.js":"23d2","./cy":"a01e","./cy.js":"a01e","./da":"f9d4","./da.js":"f9d4","./de":"46ad","./de-at":"ddd1","./de-at.js":"ddd1","./de-ch":"3512","./de-ch.js":"3512","./de.js":"46ad","./dv":"42dd","./dv.js":"42dd","./el":"7c20","./el.js":"7c20","./en-SG":"b672","./en-SG.js":"b672","./en-au":"7589","./en-au.js":"7589","./en-ca":"b4e0","./en-ca.js":"b4e0","./en-gb":"05a1e","./en-gb.js":"05a1e","./en-ie":"807a","./en-ie.js":"807a","./en-il":"d67f","./en-il.js":"d67f","./en-nz":"9381","./en-nz.js":"9381","./eo":"f259","./eo.js":"f259","./es":"8a95","./es-do":"0ecd","./es-do.js":"0ecd","./es-us":"2e22","./es-us.js":"2e22","./es.js":"8a95","./et":"7c56","./et.js":"7c56","./eu":"c03b","./eu.js":"c03b","./fa":"27bd","./fa.js":"27bd","./fi":"9ff2","./fi.js":"9ff2","./fo":"0353","./fo.js":"0353","./fr":"f541","./fr-ca":"de0e","./fr-ca.js":"de0e","./fr-ch":"25d7","./fr-ch.js":"25d7","./fr.js":"f541","./fy":"136c","./fy.js":"136c","./ga":"60f6","./ga.js":"60f6","./gd":"207d","./gd.js":"207d","./gl":"0948","./gl.js":"0948","./gom-latn":"6067","./gom-latn.js":"6067","./gu":"2459","./gu.js":"2459","./he":"09e8","./he.js":"09e8","./hi":"8b8a","./hi.js":"8b8a","./hr":"83ee","./hr.js":"83ee","./hu":"9ee0","./hu.js":"9ee0","./hy-am":"f333","./hy-am.js":"f333","./id":"23ac","./id.js":"23ac","./is":"f41b","./is.js":"f41b","./it":"0349","./it-ch":"095e","./it-ch.js":"095e","./it.js":"0349","./ja":"bd8b","./ja.js":"bd8b","./jv":"8265","./jv.js":"8265","./ka":"9c61","./ka.js":"9c61","./kk":"2303","./kk.js":"2303","./km":"5ca7","./km.js":"5ca7","./kn":"855e","./kn.js":"855e","./ko":"0fff","./ko.js":"0fff","./ku":"74af","./ku.js":"74af","./ky":"f76e","./ky.js":"f76e","./lb":"54ca","./lb.js":"54ca","./lo":"6d6a","./lo.js":"6d6a","./lt":"df52","./lt.js":"df52","./lv":"0075","./lv.js":"0075","./me":"1bcf","./me.js":"1bcf","./mi":"195f","./mi.js":"195f","./mk":"31e5","./mk.js":"31e5","./ml":"d926","./ml.js":"d926","./mn":"8e5c","./mn.js":"8e5c","./mr":"e9e0","./mr.js":"e9e0","./ms":"f718","./ms-my":"07db","./ms-my.js":"07db","./ms.js":"f718","./mt":"7277","./mt.js":"7277","./my":"1121","./my.js":"1121","./nb":"c35b","./nb.js":"c35b","./ne":"5416","./ne.js":"5416","./nl":"0330","./nl-be":"054e","./nl-be.js":"054e","./nl.js":"0330","./nn":"5d4e","./nn.js":"5d4e","./pa-in":"8327","./pa-in.js":"8327","./pl":"a284","./pl.js":"a284","./pt":"7f7a","./pt-br":"2dc1","./pt-br.js":"2dc1","./pt.js":"7f7a","./ro":"2d60","./ro.js":"2d60","./ru":"5df3","./ru.js":"5df3","./sd":"5c94","./sd.js":"5c94","./se":"d473","./se.js":"d473","./si":"5010","./si.js":"5010","./sk":"6f1a","./sk.js":"6f1a","./sl":"188e","./sl.js":"188e","./sq":"8639","./sq.js":"8639","./sr":"c1bf","./sr-cyrl":"df8a","./sr-cyrl.js":"df8a","./sr.js":"c1bf","./ss":"d832","./ss.js":"d832","./sv":"4383","./sv.js":"4383","./sw":"f52b","./sw.js":"f52b","./ta":"f6c2","./ta.js":"f6c2","./te":"98c4","./te.js":"98c4","./tet":"c7b4","./tet.js":"c7b4","./tg":"5083","./tg.js":"5083","./th":"8855","./th.js":"8855","./tl-ph":"97e4","./tl-ph.js":"97e4","./tlh":"0d4b","./tlh.js":"0d4b","./tr":"800b","./tr.js":"800b","./tzl":"cfe0","./tzl.js":"cfe0","./tzm":"5f4d","./tzm-latn":"70ce","./tzm-latn.js":"70ce","./tzm.js":"5f4d","./ug-cn":"a4e4","./ug-cn.js":"a4e4","./uk":"b93e","./uk.js":"b93e","./ur":"50c8","./ur.js":"50c8","./uz":"89eb","./uz-latn":"42a6","./uz-latn.js":"42a6","./uz.js":"89eb","./vi":"266e","./vi.js":"266e","./x-pseudo":"5fd0","./x-pseudo.js":"5fd0","./yo":"281c","./yo.js":"281c","./zh-cn":"5fd2","./zh-cn.js":"5fd2","./zh-hk":"76af","./zh-hk.js":"76af","./zh-tw":"d6ed","./zh-tw.js":"d6ed"};function s(e){var t=n(e);return a(t)}function n(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=n,e.exports=s,s.id="e395"},ed9a:function(e,t,a){"use strict";var r=a("e0cc"),s=a.n(r);s.a}});
//# sourceMappingURL=app.fd188cc9.js.map